<!doctype html><html><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title> Unity DOTS NativeArray defaults </title><link href=/icon/favicon.png rel=icon type=image/png><link href=https://jamie.sh/atom.xml rel=alternate type=application/atom+xml><link href=https://jamie.sh/theme/dark.css rel=stylesheet><link href=https://jamie.sh/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://jamie.sh></a></div><nav><a style="margin-left: 0.7em" href=/>posts</a><a style="margin-left: 0.7em" href=/about>about</a></nav></header><main><article><div class=title><div class=page-header>Unity DOTS NativeArray defaults</div><div class=meta>Posted on <time>2020-06-16</time></div></div><section class=body><p>I wanted to create a set of chunks in a grid along the X + Z axis in Unity (with the power of DOTS). To track which chunks I have already instantiated, I created a <code>NativeArray&LTfloat3></code> named <code>chunkPositions</code>. I set the size of this array to my world size (width by height) and I have a job that loops through all of the positions on the screen, checking which exist in <code>chunkPositions</code>. If the position does not exist, I can create a new chunk there.<p>This one stuck me for a little while. The chunk at 0,0,0 would just not instantiate. After digging a little deeper, it seems that no matter what - 0,0,0 would always exist in the <code>chunkPositions</code> NativeArray.<p>You're probably reading this and thinking - what a dummy. If you're not though, the reason for this behavior - is when you pre-allocate memory to the <code>NativeArray&LTT></code>, it is automatically filled with zeroed out types (in my case, float3).<p>My solution to this is to instead start my terrain at <code>1f</code> in the Y plane, so chunks would instead be at: <code>0f, 1f, 0f</code>, <code>1f, 1f, 0f</code> and so on. Simple! This also means that a value of <code>0f, 0f, 0f</code> in the NativeArray can also be considered "not instantiated".</section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=https://jamie.sh/tags/game-dev/>Game Dev</a><li><a href=https://jamie.sh/tags/unity/>Unity</a><li><a href=https://jamie.sh/tags/dots/>DOTS</a></ul></nav></div></article></main></div><footer>Copyright Â© 2022.<div class=attribution>Built with <a href=https://www.getzola.org/>Zola</a>, based on <a href=https://github.com/not-matthias/apollo>Apollo</a>, and hosted on <a href=https://netlify.com/>Netlify</a>.</div></footer>