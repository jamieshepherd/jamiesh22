<!doctype html><html><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title> Wordpress to Zola </title><link href=/icon/favicon.png rel=icon type=image/png><link href=https://jamie.sh/atom.xml rel=alternate type=application/atom+xml><link href=https://jamie.sh/theme/dark.css rel=stylesheet><link href=https://jamie.sh/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://jamie.sh></a></div><nav><a style="margin-left: 0.7em" href=/>posts</a><a style="margin-left: 0.7em" href=/about>about</a></nav></header><main><article><div class=title><div class=page-header>Wordpress to Zola</div><div class=meta>Posted on <time>2022-07-29</time></div></div><section class=body><h2 id=some-background>Some background</h2><p>I recently migrated my personal website from <a href=https://wordpress.org>WordPress</a> to <a href=https://getzola.org>Zola</a>, a Rust-powered static site generator. I've used static site generators in past versions of this site - but opted for WordPress in the 2020-2021 version because static sites do come with <em>some</em> extra manual work no matter how you cut it. WordPress with its online admin interface abstracts a lot of that away - and it's genuinely a pleasurable experience to actually write and publish.<p>With that being said however, I'm in a performance phase right now, so everything has to be as small as possible. Inspired by posts like <a href=https://endtimes.dev/why-your-website-should-be-under-14kb-in-size/>"Why your website should be under 14kb in size"</a> - I wanted to push out a minimal, super performant site, and learn some things along the way.<h2 id=picking-a-static-site-generator>Picking a Static Site Generator</h2><p>I had a long dive into all the static generators available, but unfortunately so many of them are bundled into SPAs (Single Page Applications) with JavaScript frameworks. Don't get me wrong, I love JavaScript - but as soon as you start throwing a library in front of your site you end up hitting the 14kb limit really quickly. I found <a href=https://cobalt-org.github.io/>Cobalt</a> and <a href=https://getzola.org>Zola</a> - both Rust implementations of SSGs (Static Site Generators), and opted for Zola because of the available themes.<h2 id=migrating-from-wordpress>Migrating from WordPress</h2><p>WordPress thankfully has a very easy export interface. I pushed my previous posts (albeit not a huge amount) into an .xml file, and thought about making a conversion script from .xml to .md. Luckily, somebody had the same thought before me.<p><a href=https://github.com/TatriX/wordpress-to-zola>wordpress-to-zola</a> was a super easy to use conversion script. I threw my .xml export into the root directory and ran <code>cargo run</code>, and it was done. The only thing I noticed on a spot check was my hyphens ended up being prefixed with "" - I'm not sure if the script did this or if it was something else along the way - since I only noticed it later, but it's worth double-checking the output if anyone is following along.<h2 id=setting-up-zola>Setting up Zola</h2><p>Most of the setup was out-of-the-box following the Zola install instructions, but there were some gotchas.<h3 id=directory-structure>Directory structure</h3><p>My WordPress installation had "SEO friendly" URLs, including things like the date (e.g. /2020/01/20/slug-here). I think Zola by default expects a more flat structure. To ensure my posts ended up in the posts index, I had to add an <code>_index.md</code> file to each directory with the following contents:<pre class=language-md data-lang=md style=background-color:#0f1419;color:#bfbab0;><code class=language-md data-lang=md><span>+++</span><span>
</span><span>transparent = true</span><span>
</span><span>in_search_index = false</span><span>
</span><span>render = false</span><span>
</span><span>+++</span><span>
</span></code></pre><p><code>transparent = true</code> is the line that surfaces the posts to the top level index. <code>in_search_index</code> and <code>render</code> were needed to prevent those directories showing up in the sitemap, and being visitable on their own.<h3 id=aliases>Aliases</h3><p>I also noticed after conversion that an old post had an incorrect title. Nobody visits this blog, but as an exercise in corrrectness I wanted to make sure that old URLs would redirect correctly. This can be achieved in the markdown front-matter, with the <code>aliases</code> property. For example, <a href=https://jamie.sh/posts/2020/06/01/game-development-a-beginning/>this post</a> was incorrectly titled "hello-world-2" in my WordPress blog. So <code>aliases = ["posts/2020/06/01/hello-world-2"]</code> was required to forward the old link correctly.<h3 id=images>Images</h3><p>I have a handful of images in some posts. There are a few ways to achieve asset linking in Zola, but the easiest for me was to throw the image in the same directory as the post. Unfortunately to make the relative images work correctly - I had to restructure my posts a little from:<pre class=language-md data-lang=md style=background-color:#0f1419;color:#bfbab0;><code class=language-md data-lang=md><span style=color:#95e6cb;>- </span><span>/2022</span><span>
</span><span>    </span><span style=color:#95e6cb;>-</span><span> /08</span><span>
</span><span>        </span><span style=color:#95e6cb;>-</span><span> /29</span><span>
</span><span>            </span><span style=color:#95e6cb;>-</span><span> wordpress-to-zola.md</span><span>
</span></code></pre><p>to:<pre class=language-md data-lang=md style=background-color:#0f1419;color:#bfbab0;><code class=language-md data-lang=md><span style=color:#95e6cb;>- </span><span>/2022</span><span>
</span><span>    </span><span style=color:#95e6cb;>-</span><span> /08</span><span>
</span><span>        </span><span style=color:#95e6cb;>-</span><span> /29</span><span>
</span><span>            </span><span style=color:#95e6cb;>-</span><span> /wordpress-to-zola</span><span>
</span><span>                </span><span style=color:#95e6cb;>-</span><span> index.md</span><span>
</span></code></pre><p>Then, I could simply throw images into the post folder, and reference them relatively with simple markdown.<h2 id=deployment>Deployment</h2><p>I used Netlify to deploy this blog, and there's a great setup guide in the Zola docs for exactly how to do this. You can find that <a href=https://www.getzola.org/documentation/deployment/netlify/>here</a>.<h2 id=to-conclude>To conclude</h2><p>That's about it, all in all I'd say the migration took about an hour with the gotchas involved - but with that knowledge in mind would have taken 15 minutes if I were to do it again. I wanted to check my PageSpeed Insights score, which hit 100 in mobile and desktop - a promising start. Checking the Network tab in Chrome Dev Tools further impressed me, with just 3kb sent over the initial load. Using the Netlify static-site CDN should make the site near instant for anyone around the world to load. Neat!</section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=https://jamie.sh/tags/programming/>Programming</a></ul></nav></div></article></main></div><footer>Copyright Â© 2022.<div class=attribution>Built with <a href=https://www.getzola.org/>Zola</a>, based on <a href=https://github.com/not-matthias/apollo>Apollo</a>, and hosted on <a href=https://netlify.com/>Netlify</a>.</div></footer>